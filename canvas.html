<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="user-scalable=0">
<title>无标题文档</title>
<style>
html,body{
	height:100%;
	width:100%;
}
body{
	padding:0;
	margin:0;
	border:0;
}
</style>
</head>

<body>
<canvas id="canvas"></canvas>
<script>
var c = document.getElementById("canvas");
var bodyWidth = document.body.clientWidth;
var bodyHeight = document.body.clientHeight;
c.width = bodyWidth;
c.height = bodyHeight;
var ctx = c.getContext("2d");
function drawPt(x,y)
{
	ctx.fillStyle = "#000000";
	ctx.fillRect(x-3,y-3,6,6);
}
function drawXyPt(dcpx,dcpy)
{
	tmpx1=dcpx*(bodyWidth/20);
	tmpy1=dcpy*(bodyWidth/20);
	tmpx1+=(bodyWidth/2);
	tmpy1=(bodyHeight/2)-tmpy1;
	drawPt(tmpx1,tmpy1);
}
function lineConnect(x1,y1,x2,y2)
{
	ctx.beginPath();
	ctx.moveTo(x1,y1);
	ctx.lineTo(x2,y2);
	ctx.stroke();
	ctx.closePath();
}
//drawXyPt(3,3);
//drawXyPt(-3,3);
//drawXyPt(3,-3);
//drawXyPt(-3,-3);
cameraX = -0.2;
cameraY = 3;
cameraZ = 0.5;
var xArr=new Array();
xArr[0] = 1;
xArr[1] = 5;
xArr[2] = 5;
xArr[3] = 1;
xArr[4] = 1;
xArr[5] = 5;
xArr[6] = 5;
xArr[7] = 1;
var yArr=new Array();
yArr[0] = 1;
yArr[1] = 1;
yArr[2] = 5;
yArr[3] = 5;
yArr[4] = 1;
yArr[5] = 1;
yArr[6] = 5;
yArr[7] = 5;
var zArr=new Array();
zArr[0] = 1;
zArr[1] = 1;
zArr[2] = 1;
zArr[3] = 1;
zArr[4] = 3;
zArr[5] = 3;
zArr[6] = 3;
zArr[7] = 3;
var xDispArr=new Array();
var yDispArr=new Array();
var lineArr=new Array(0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7);

setTimeout(maindraw,1);
function maindraw()
{
	ctx.clearRect(0,0,canvas.width,canvas.height);
	for(tmp=0;tmp<8;tmp++)
	{
		tmp1 = xArr[tmp]*1.0-cameraX*1.0;
		tmp2 = zArr[tmp]*1.0+cameraZ*1.0;
		xDispArr[tmp] = tmp1 / tmp2;
	}
	for(tmp=0;tmp<8;tmp++)
	{
		tmp1 = yArr[tmp]*1.0-cameraY*1.0;
		tmp2 = zArr[tmp]*1.0+cameraZ*1.0;
		yDispArr[tmp] = tmp1 / tmp2;
	}
	for(tmp=0;tmp<8;tmp++)
	{
		drawXyPt(xDispArr[tmp],yDispArr[tmp]);
	}
	//lineConnect
	for(tmp=0;tmp<lineArr.length;tmp+=2)
	{
		tmpx1=xDispArr[lineArr[tmp]]*(bodyWidth/20);
		tmpy1=yDispArr[lineArr[tmp]]*(bodyWidth/20);
		tmpx1+=(bodyWidth/2);
		tmpy1=(bodyHeight/2)-tmpy1;
		tmpx2=xDispArr[lineArr[tmp+1]]*bodyWidth/20;
		tmpy2=yDispArr[lineArr[tmp+1]]*bodyWidth/20;
		tmpx2+=bodyWidth/2;
		tmpy2=bodyHeight/2-tmpy2;
		lineConnect(tmpx1,tmpy1,tmpx2,tmpy2);
	}
	setTimeout(maindraw,40);
}
</script>
<script>
function test()
{
	//cameraX = cameraX + 0.03;
	//cameraY = cameraY + 0.03;
	//cameraZ = cameraZ + 0.01;
	//setTimeout(test,40);
}
//setTimeout(test,40);
</script>
<script>
window.onkeydown=function(){
	if(event.keyCode == 74){
		//alert('j');
		cameraY = cameraY - 0.1;
	}
	else if(event.keyCode == 65){
		//alert('a');
		cameraX = cameraX - 0.3;
	}
	else if(event.keyCode == 75){
		//alert('k');
		cameraY = cameraY + 0.1;
	}
	else if(event.keyCode == 68){
		//alert('d');
		cameraX = cameraX + 0.3;
	}
	else if(event.keyCode == 87){
		//alert('w');
		cameraZ = cameraZ - 0.04;
	}
	else if(event.keyCode == 83){
		//alert('s');
		cameraZ = cameraZ + 0.04;
	}
}
</script>

<!--
<div style="position:absolute;bottom:0;left:0;height:200px;width:200px;text-align:center;">
<div style="height:33%;width:100%;background:#CCC;text-align:center;" onclick="up()">↑
</div>
<div style="height:33%;width:100%;text-align:center;">
	<div style="height:100%;width:50%;float:left;background:#F00" onclick="left()">←</div>
    <div style="height:100%;width:50%;float:left;background:#0F0" onclick="right()">→</div>
</div>
<div style="height:33%;width:100%;background:#CCC;text-align:center;" onclick="down()">↓
</div>
</div>

<script>
function up()
{
	//alert("up");
	cameraZ = cameraZ - 0.04;
}
function down()
{
	//alert("down");
	cameraZ = cameraZ + 0.04;
}
function left()
{
	//alert("left");
	cameraX = cameraX - 0.3;
}
function right()
{
	//alert("right");
	cameraX = cameraX + 0.3;
}
</script>
-->
<!--
<script>
function test()
{
	cameraX = cameraX + 0.03;
	cameraY = cameraY + 0.03;
	cameraZ = cameraZ + 0.01;
	setTimeout(test,40);
}
setTimeout(test,40);
</script>
-->
</body>
</html>
