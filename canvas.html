<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="user-scalable=0">
		<title>Canvas3D</title>
		<style>
			html,body{
				height:100%;
				width:100%;
			}
			body{
				padding:0;
				margin:0;
				border:0;
			}
		</style>
	</head>

	<body>
		<canvas id="canvas1"></canvas>
		<script>

			/*
			** Structs
			*/
			function Camera(positionX, positionY, positionZ, angleX, angleY, angleZ, screenWidth, screenHeight){
				this.x            = positionX;
				this.y            = positionY;
				this.z            = positionZ;
				this.anglex       = angleX;
				this.angley       = angleY;
				this.anglez       = angleZ;
				this.screenWidth  = screenWidth;
				this.screenHeight = screenHeight;
			}

			function Vector2D(x,y){
				this.x = x;
				this.y = y;
			}

			function Mesh2D(vec1,vec2,vec3){
				this.vec1 = vec1;
				this.vec2 = vec2;
				this.vec3 = vec3;
			}

			function Vector4D(x,y,z){
				this.x = x;
				this.y = y;
				this.z = z;
				this.w = 1;
			}

			function Mesh4D(vec1,vec2,vec3){
				this.vec1 = vec1;
				this.vec2 = vec2;
				this.vec3 = vec3;
			}

			function Object4D(meshlist){
				this.meshlist = meshlist;
			}

			function World4D(){
				this.meshlist = [];
				this.PlaceObject4D = function(newObject,x,y,z){
					for(var i = 0; i < newObject.meshlist.length; i++){
						this.meshlist.push(new Mesh4D(new Vector4D(newObject.meshlist[i].vec1.x + x,
																   newObject.meshlist[i].vec1.y + y,
																   newObject.meshlist[i].vec1.z + z,),
													  new Vector4D(newObject.meshlist[i].vec2.x + x,
																   newObject.meshlist[i].vec2.y + y,
																   newObject.meshlist[i].vec2.z + z,),
													  new Vector4D(newObject.meshlist[i].vec3.x + x,
																   newObject.meshlist[i].vec3.y + y,
																   newObject.meshlist[i].vec3.z + z,)));
					}
					this.meshlist.push();
				}
			}

			/*
			** Canvas Functions
			*/

			function CanvasInit(canvasID, width, height){
				var canvas    = document.getElementById(canvasID);
				var ctx       = canvas.getContext("2d");
				canvas.width  = width;
				canvas.height = height;
				return ctx;
			}

			function CanvasDrawVector2D(ctx, vector){
				ctx.fillRect(vector.x-3, //Start X Position
							 vector.y-3, //Start Y Position
							 6,          //Width
							 6);         //Height
			}

			function CanvasDrawMesh2D(ctx, mesh, color){
				CanvasDrawVector2D(ctx, mesh.vec1);
				CanvasDrawVector2D(ctx, mesh.vec2);
				CanvasDrawVector2D(ctx, mesh.vec3);

				ctx.fillStyle   = "rgba(0,144,255,0.5)";
				ctx.strokeStyle = "#000000";
				ctx.beginPath();
				ctx.moveTo(mesh.vec1.x, mesh.vec1.y);
				ctx.lineTo(mesh.vec2.x, mesh.vec2.y);
				ctx.lineTo(mesh.vec3.x, mesh.vec3.y);
				ctx.lineTo(mesh.vec1.x, mesh.vec1.y);
				ctx.fill();
				ctx.stroke();
				ctx.closePath();
			}

			/*
			** Projection Functions
			*/

			function Vector4D2Vector2D(camera,vector){
				var x2d = (camera.screenWidth  / 2) + ((vector.x - camera.x) / (vector.z + camera.z) * 50);
				var y2d = (camera.screenHeight / 2) - ((vector.y - camera.y) / (vector.z + camera.z) * 50);
				return new Vector2D(x2d,y2d);
			}

			function Mesh4D2Mesh2D(camera,mesh4d){
				return new Mesh2D(Vector4D2Vector2D(camera, mesh4d.vec1),
								  Vector4D2Vector2D(camera, mesh4d.vec2),
								  Vector4D2Vector2D(camera, mesh4d.vec3));
			}

			window.onload = function(){
				var cam1 = new Camera(0, 0, 0, 0, 0, 0, document.body.clientWidth, document.body.clientHeight);
				var ctx  = CanvasInit("canvas1", cam1.screenWidth, cam1.screenHeight);
				var obj1 = new Object4D([new Mesh4D(new Vector4D(1,1,1), new Vector4D(4,1,1), new Vector4D(1,4,1)),
										 new Mesh4D(new Vector4D(1,1,1), new Vector4D(4,4,1), new Vector4D(4,1,1)),
										 new Mesh4D(new Vector4D(1,4,4), new Vector4D(1,1,1), new Vector4D(1,1,1)),
										 new Mesh4D(new Vector4D(1,4,4), new Vector4D(1,4,1), new Vector4D(1,1,1)),
										 new Mesh4D(new Vector4D(4,4,4), new Vector4D(4,1,4), new Vector4D(4,1,1)),
										 new Mesh4D(new Vector4D(4,4,4), new Vector4D(4,4,1), new Vector4D(4,1,1)),
										 new Mesh4D(new Vector4D(1,1,4), new Vector4D(4,1,4), new Vector4D(1,4,4)),
										 new Mesh4D(new Vector4D(1,1,4), new Vector4D(4,4,4), new Vector4D(4,1,4))]);
				var world1 = new World4D([obj1]);
				world1.PlaceObject4D(obj1,2.5,2.5,2.5);
				console.log(world1);
			}
		</script>
	</body>
</html>